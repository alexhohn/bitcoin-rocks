server {
    listen 8080;
    server_name localhost;

    root /app;
    index index.html;

    location ~ ^/\.well-known/ {
        add_header Access-Control-Allow-Origin "*";
        add_header Access-Control-Allow-Headers "*";
        add_header Access-Control-Allow-Methods "GET, OPTIONS";
    }

    location / {
        try_files $uri $uri.html $uri/ =404;
    }

    # Redirects (case-insensitive where needed)
    rewrite ^/orange-pill-pack$ /stickers permanent;
    rewrite ^/sticker$ /stickers permanent;
    rewrite ^/bitcoin-stickers$ /stickers permanent;
    rewrite ^/opp$ /stickers permanent;
    rewrite ^/gold$ /bitcoin-vs-gold permanent;
    rewrite (?i)^/cbdc$ /bitcoin-vs-cbdc permanent;
    rewrite (?i)^/inflation$ /inflation permanent;
    rewrite (?i)^/bank-run$ /bank-runs permanent;
    rewrite (?i)^/bankrun$ /bank-runs permanent;
    rewrite (?i)^/bankruns$ /bank-runs permanent;
    rewrite ^/wallet$ /wallets permanent;
    rewrite ^/postcard$ /postcards permanent;
    rewrite ^/guide$ /business/guide permanent;
    rewrite ^/guides$ /business/guide permanent;
    rewrite ^/business/guides$ /business/guide permanent;
    rewrite ^/kit$ /business/kit permanent;
    rewrite ^/business-kit$ /business/kit permanent;
    rewrite ^/businesskit$ /business/kit permanent;
    rewrite (?i)^/lightning$ /lightning permanent;
    rewrite ^/save$ /inflation?sign=got-inflation permanent;

    error_page 404 /404.html;
}